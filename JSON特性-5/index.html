
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="kotlin序列化中文文档">
      
      
        <meta name="author" content="knightwood">
      
      
      
        <link rel="prev" href="../%E5%A4%9A%E6%80%81%E6%80%A7-4/">
      
      
        <link rel="next" href="../%E6%9B%BF%E4%BB%A3%E6%A0%BC%E5%BC%8F%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%BC%E5%BC%8F%EF%BC%88%E5%AE%9E%E9%AA%8C%E6%80%A7%EF%BC%89-6/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>配置Json序列化器功能 - kotlin序列化中文文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#json" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="kotlin序列化中文文档" class="md-header__button md-logo" aria-label="kotlin序列化中文文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kotlin序列化中文文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              配置Json序列化器功能
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Knightwood/kotlin-serialization-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="kotlin序列化中文文档" class="md-nav__button md-logo" aria-label="kotlin序列化中文文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    kotlin序列化中文文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Knightwood/kotlin-serialization-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    简单入门使用文档
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%9F%BA%E6%9C%AC%E5%BA%8F%E5%88%97%E5%8C%96-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    序列化的基本使用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%86%85%E7%BD%AE%E7%B1%BB-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内置类
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BA%8F%E5%88%97%E5%8C%96%E7%A8%8B%E5%BA%8F-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    序列化程序
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%A4%9A%E6%80%81%E6%80%A7-4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多态性
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    配置Json序列化器功能
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    配置Json序列化器功能
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#json_1" class="md-nav__link">
    <span class="md-ellipsis">
      Json 配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      漂亮的输出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      宽松解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      忽略未知键
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_2" class="md-nav__link">
    <span class="md-ellipsis">
      备用 Json 名称
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      强制输入值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      编码默认值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null" class="md-nav__link">
    <span class="md-ellipsis">
      显式 null
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      允许结构化映射键
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      允许特殊的浮点值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      多态性的类鉴别器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      类鉴别器输出方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      以不区分大小写的方式解码枚举
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      全局命名策略
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_3" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 元素">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json_4" class="md-nav__link">
    <span class="md-ellipsis">
      解析为 Json 元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_5" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素的类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_6" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素生成器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_7" class="md-nav__link">
    <span class="md-ellipsis">
      解码 Json 元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_8" class="md-nav__link">
    <span class="md-ellipsis">
      对文字 Json 内容进行编码（实验性）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="对文字 Json 内容进行编码（实验性）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#large-decimal" class="md-nav__link">
    <span class="md-ellipsis">
      序列化large decimal类型数字
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonunquotedliteral-null" class="md-nav__link">
    <span class="md-ellipsis">
      禁止用于 JsonUnquotedLiteral 创建 的 null 文字未加引号的值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_9" class="md-nav__link">
    <span class="md-ellipsis">
      Json 转换
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      数组包装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      数组解包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      操作默认值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      基于内容的多态反序列化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      （实验性）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_10" class="md-nav__link">
    <span class="md-ellipsis">
      维护自定义 JSON 属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%9B%BF%E4%BB%A3%E6%A0%BC%E5%BC%8F%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%BC%E5%BC%8F%EF%BC%88%E5%AE%9E%E9%AA%8C%E6%80%A7%EF%BC%89-6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    替代格式和自定义格式（实验性）
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E9%99%84%E5%BD%95%20A.%20%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%80%BC%E7%B1%BB%EF%BC%88%E4%BB%85%E9%99%90%20IR%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    序列化和值类（特定于 IR）
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#json_1" class="md-nav__link">
    <span class="md-ellipsis">
      Json 配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      漂亮的输出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      宽松解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      忽略未知键
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_2" class="md-nav__link">
    <span class="md-ellipsis">
      备用 Json 名称
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      强制输入值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      编码默认值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null" class="md-nav__link">
    <span class="md-ellipsis">
      显式 null
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      允许结构化映射键
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      允许特殊的浮点值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      多态性的类鉴别器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      类鉴别器输出方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      以不区分大小写的方式解码枚举
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      全局命名策略
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_3" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 元素">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json_4" class="md-nav__link">
    <span class="md-ellipsis">
      解析为 Json 元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_5" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素的类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_6" class="md-nav__link">
    <span class="md-ellipsis">
      Json 元素生成器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_7" class="md-nav__link">
    <span class="md-ellipsis">
      解码 Json 元素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_8" class="md-nav__link">
    <span class="md-ellipsis">
      对文字 Json 内容进行编码（实验性）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="对文字 Json 内容进行编码（实验性）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#large-decimal" class="md-nav__link">
    <span class="md-ellipsis">
      序列化large decimal类型数字
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonunquotedliteral-null" class="md-nav__link">
    <span class="md-ellipsis">
      禁止用于 JsonUnquotedLiteral 创建 的 null 文字未加引号的值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_9" class="md-nav__link">
    <span class="md-ellipsis">
      Json 转换
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Json 转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      数组包装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      数组解包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      操作默认值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      基于内容的多态反序列化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      （实验性）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json_10" class="md-nav__link">
    <span class="md-ellipsis">
      维护自定义 JSON 属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="json">配置Json序列化器功能<a class="headerlink" href="#json" title="Permanent link">&para;</a></h1>
<p>This is the fifth chapter of the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serialization-guide.md">Kotlin Serialization Guide</a>. In this chapter, we&rsquo;ll walk through features of <a href="https://www.json.org/json-en.html">JSON</a> serialization available in the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> class.<br />
这是《Kotlin 序列化指南》的第五章。在本章中，我们将演练 Json 类中提供的 JSON 序列化功能。</p>
<h2 id="json_1">Json 配置<a class="headerlink" href="#json_1" title="Permanent link">&para;</a></h2>
<p>Json configuration</p>
<p>The default <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> implementation is quite strict with respect to invalid inputs. It enforces Kotlin type safety and restricts Kotlin values that can be serialized so that the resulting JSON representations are standard. Many non-standard JSON features are supported by creating a custom instance of a JSON <em>format</em>.  </p>
<p>默认的 Json 实现对于无效输入非常严格。它强制实施 Kotlin 类型安全性，并限制可序列化的 Kotlin 值，以便生成的 JSON 表示形式是标准的。通过创建 JSON 格式的自定义实例来支持许多非标准 JSON 功能。</p>
<p>To use a custom JSON format configuration, create your own <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> class instance from an existing instance, such as a default <code>Json</code> object, using the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json.html">Json()</a> builder function. Specify parameter values in the parentheses via the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/index.html">JsonBuilder</a> DSL. The resulting <code>Json</code> format instance is immutable and thread-safe; it can be simply stored in a top-level property.  </p>
<p>要使用自定义 JSON 格式配置，请使用 Json（） 构建器函数从现有实例（如默认 <code>Json</code> 对象）创建自己的 Json 类实例。通过 JsonBuilder DSL 在括号中指定参数值。生成 <code>Json</code> 的格式实例是不可变的，并且是线程安全的;它可以简单地存储在顶级属性中。</p>
<blockquote>
<p>We recommend that you store and reuse custom instances of formats for performance reasons because format implementations may cache format-specific additional information about the classes they serialize.  </p>
<p>出于性能原因，我们建议您存储和重用格式的自定义实例，因为格式实现可能会缓存有关其序列化的类的特定于格式的附加信息。</p>
</blockquote>
<p>This chapter shows configuration features that <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> supports.<br />
本章介绍 Json 支持的配置功能。</p>
<h3 id="_1">漂亮的输出<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>Pretty printing</p>
<p>By default, the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> output is a single line. You can configure it to pretty print the output (that is, add indentations and line breaks for better readability) by setting the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/pretty-print.html">prettyPrint</a> property to <code>true</code>:  </p>
<p>默认情况下，Json 输出为单行。您可以通过将 prettyPrint 属性设置为 <code>true</code> ：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">prettyPrint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-01.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>It gives the following nice result:<br />
它给出了以下不错的结果：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>{
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    &quot;name&quot;: &quot;kotlinx.serialization&quot;,
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    &quot;language&quot;: &quot;Kotlin&quot;
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>}
</span></code></pre></div>
<h3 id="_2">宽松解析<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>Lenient parsing</p>
<p>By default, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> parser enforces various JSON restrictions to be as specification-compliant as possible (see <a href="https://www.ietf.org/rfc/rfc4627.txt">RFC-4627</a>). Particularly, keys and string literals must be quoted. Those restrictions can be relaxed with the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/is-lenient.html">isLenient</a> property. With <code>isLenient = true</code>, you can parse quite freely-formatted data:  </p>
<p>默认情况下，Json 解析器强制执行各种 JSON 限制，以尽可能符合规范（请参阅 RFC-4627）。特别是，键和字符串文字必须加引号。这些限制可以通过 isLenient 属性放宽。使用 <code>isLenient = true</code> ，您可以解析格式非常自由的数据：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">isLenient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kd">enum</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">SUPPORTED</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nd">@Serializable</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">status</span><span class="p">:</span><span class="w"> </span><span class="n">Status</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">votes</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="s">        {</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="s">            name   : kotlinx.serialization,</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="s">            status : SUPPORTED,</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="s">            votes  : &quot;9000&quot;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="s">        }</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-02.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>You get the object, even though all keys of the source JSON, string, and enum values are unquoted, while an integer is quoted:<br />
即使源 JSON、字符串和枚举值的所有键都不带引号，而整数则用引号引出，您也会得到该对象：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>Project(name=kotlinx.serialization, status=SUPPORTED, votes=9000)
</span></code></pre></div>
<h3 id="_3">忽略未知键<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>Ignoring unknown keys</p>
<p>JSON format is often used to read the output of third-party services or in other dynamic environments where new properties can be added during the API evolution. By default, unknown keys encountered during deserialization produce an error. You can avoid this and just ignore such keys by setting the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/ignore-unknown-keys.html">ignoreUnknownKeys</a> property to <code>true</code>:  </p>
<p>JSON 格式通常用于读取第三方服务的输出，或者用于在 API 演进过程中可以添加新属性的其他动态环境中。默认情况下，在反序列化过程中遇到的未知键会生成错误。您可以通过将 ignoreUnknownKeys 属性设置为 <code>true</code> ：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ignoreUnknownKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="s">        {&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;}</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-03.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>It decodes the object despite the fact that the <code>Project</code> class doesn&rsquo;t have the <code>language</code> property:<br />
它对对象进行解码，尽管 <code>Project</code> 该类没有以下 <code>language</code> 属性：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Project(name=kotlinx.serialization)
</span></code></pre></div>
<h3 id="json_2">备用 Json 名称<a class="headerlink" href="#json_2" title="Permanent link">&para;</a></h3>
<p>Alternative Json names</p>
<p>It&rsquo;s not a rare case when JSON fields are renamed due to a schema version change. You can use the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md#serial-field-names"><code>@SerialName</code> annotation</a> to change the name of a JSON field, but such renaming blocks the ability to decode data with the old name. To support multiple JSON names for the one Kotlin property, there is the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-names/index.html">JsonNames</a> annotation:  </p>
<p>由于架构版本更改而重命名 JSON 字段的情况并不少见。您可以使用 <code>@SerialName</code> 注解更改 JSON 字段的名称，但此类重命名会阻止使用旧名称解码数据。为了支持一个 Kotlin 属性的多个 JSON 名称，可以使用 JsonNames 注解：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="nd">@JsonNames</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">)</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;{&quot;name&quot;:&quot;kotlinx.serialization&quot;}&quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">oldProject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;{&quot;title&quot;:&quot;kotlinx.coroutines&quot;}&quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="n">oldProject</span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-04.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>As you can see, both <code>name</code> and <code>title</code> Json fields correspond to <code>name</code> property:<br />
如您所见，这两个 <code>name</code> 字段和 <code>title</code> Json 字段都对应于 <code>name</code> property：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Project(name=kotlinx.serialization)
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Project(name=kotlinx.coroutines)
</span></code></pre></div>
<p>Support for <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-names/index.html">JsonNames</a> annotation is controlled by the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/use-alternative-names.html">JsonBuilder.useAlternativeNames</a> flag. Unlike most of the configuration flags, this one is enabled by default and does not need attention unless you want to do some fine-tuning.  </p>
<p>对 JsonNames 注释的支持由 JsonBuilder.useAlternativeNames 标志控制。与大多数配置标志不同，默认情况下，此标志处于启用状态，除非您想进行一些微调，否则不需要注意。</p>
<h3 id="_4">强制输入值<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>Coercing input values</p>
<p>JSON formats that from third parties can evolve, sometimes changing the field types. This can lead to exceptions during decoding when the actual values do not match the expected values. The default <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> implementation is strict with respect to input types as was demonstrated in the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md#type-safety-is-enforced">Type safety is enforced</a> section. You can relax this restriction using the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/coerce-input-values.html">coerceInputValues</a> property.  </p>
<p>来自第三方的 JSON 格式可以演变，有时会更改字段类型。当实际值与预期值不匹配时，这可能会导致解码过程中出现异常。默认的 Json 实现对输入类型是严格的，如强制类型安全部分所示。可以使用 coerceInputValues 属性放宽此限制。</p>
<p>This property only affects decoding. It treats a limited subset of invalid input values as if the corresponding property was missing and uses the default value of the corresponding property instead. The current list of supported invalid values is:  </p>
<p>此属性仅影响解码。它将无效输入值的有限子集视为缺少相应的属性，并改用相应属性的默认值。当前支持的无效值列表为：</p>
<ul>
<li><code>null</code> inputs for non-nullable types<br />
<code>null</code> 不可为 null 类型的输入</li>
<li>unknown values for enums<br />
    枚举的未知值</li>
</ul>
<blockquote>
<p>This list may be expanded in the future, so that <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> instance configured with this property becomes even more permissive to invalid value in the input, replacing them with defaults.  </p>
<p>将来可能会扩展此列表，以便使用此属性配置的 Json 实例对输入中的无效值更加宽容，将其替换为默认值。</p>
</blockquote>
<p>See the example from the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md#type-safety-is-enforced">Type safety is enforced</a> section:<br />
请参阅强制执行类型安全部分中的示例：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">coerceInputValues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="s">        {&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:null}</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-05.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The invalid <code>null</code> value for the <code>language</code> property was coerced into the default value:<br />
<code>language</code> 该属性的无效 <code>null</code> 值被强制为默认值：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Project(name=kotlinx.serialization, language=Kotlin)
</span></code></pre></div>
<h3 id="_5">编码默认值<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>Encoding defaults</p>
<p>Default values of properties are not encoded by default because they will be assigned to missing fields during decoding anyway. See the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md#defaults-are-not-encoded-by-default">Defaults are not encoded</a> section for details and an example. This is especially useful for nullable properties with null defaults and avoids writing the corresponding null values. The default behavior can be changed by setting the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/encode-defaults.html">encodeDefaults</a> property to <code>true</code>:  </p>
<p>默认情况下，属性的默认值不会编码，因为它们无论如何都会在解码过程中分配给缺失的字段。有关详细信息和示例，请参阅默认值未编码部分。这对于默认值为 null 的可为 null 属性特别有用，并避免写入相应的 null 值。可以通过将 encodeDefaults 属性设置为 <code>true</code> 以下值来更改默认行为：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">encodeDefaults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">,</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">website</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-06.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>It produces the following output which encodes all the property values including the default ones:<br />
它生成以下输出，该输出对所有属性值（包括默认值）进行编码：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;,&quot;website&quot;:null}
</span></code></pre></div>
<h3 id="null">显式 null<a class="headerlink" href="#null" title="Permanent link">&para;</a></h3>
<p>Explicit nulls</p>
<p>By default, all <code>null</code> values are encoded into JSON strings, but in some cases you may want to omit them. The encoding of <code>null</code> values can be controlled with the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/explicit-nulls.html">explicitNulls</a> property.  </p>
<p>默认情况下，所有 <code>null</code> 值都编码为 JSON 字符串，但在某些情况下，您可能希望省略它们。可以使用 explicitNulls 属性控制值的 <code>null</code> 编码。</p>
<p>If you set property to <code>false</code>, fields with <code>null</code> values are not encoded into JSON even if the property does not have a default <code>null</code> value. When decoding such JSON, the absence of a property value is treated as <code>null</code> for nullable properties without a default value.  </p>
<p>如果将 property 设置为 <code>false</code> ，则即使属性没有默认 <code>null</code> 值，也不会将具有 <code>null</code> 值的字段编码为 JSON。解码此类 JSON 时，对于没有默认值的可为 null 的属性，将缺少属性值视为 <code>null</code> 缺少属性值。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">explicitNulls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">version</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1.2.2&quot;</span><span class="p">,</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">website</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span><span class="p">,</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">description</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="p">)</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="n">json</span><span class="p">))</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-07.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>As you can see, <code>version</code>, <code>website</code> and <code>description</code> fields are not present in output JSON on the first line. After decoding, the missing nullable property <code>website</code> without a default values has received a <code>null</code> value, while nullable properties <code>version</code> and <code>description</code> are filled with their default values:  </p>
<p>如您所见， <code>version</code> 第一行的输出 JSON 中不存在 、 <code>website</code> 和 <code>description</code> 字段。解码后，缺少的没有默认值的可为 null 属性 <code>website</code> 已收到一个 <code>null</code> 值，而可为 null 的属性 <code>version</code> 则 <code>description</code> 用其默认值填充：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;}
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Project(name=kotlinx.serialization, language=Kotlin, version=1.2.2, website=null, description=null)
</span></code></pre></div>
<p><code>explicitNulls</code> is <code>true</code> by default as it is the default behavior across different versions of the library.<br />
<code>explicitNulls</code> 默认情况下， <code>true</code> 因为它是库不同版本的默认行为。</p>
<h3 id="_6">允许结构化映射键<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>Allowing structured map keys </p>
<p>JSON format does not natively support the concept of a map with structured keys. Keys in JSON objects are strings and can be used to represent only primitives or enums by default. You can enable non-standard support for structured keys with the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/allow-structured-map-keys.html">allowStructuredMapKeys</a> property.  </p>
<p>JSON 格式本身不支持具有结构化键的映射的概念。JSON 对象中的键是字符串，默认情况下只能用于表示基元或枚举。可以使用 allowStructuredMapKeys 属性启用对结构化键的非标准支持。</p>
<p>This is how you can serialize a map with keys of a user-defined class:<br />
以下是使用用户定义类的键序列化映射的方法：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">allowStructuredMapKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapOf</span><span class="p">(</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;Serialization&quot;</span><span class="p">,</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.coroutines&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;Coroutines&quot;</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">map</span><span class="p">))</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-08.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The map with structured keys gets represented as JSON array with the following items: <code>[key1, value1, key2, value2,...]</code>.<br />
具有结构化键的映射表示为包含以下项的 JSON 数组： <code>[key1, value1, key2, value2,...]</code> .</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>[{&quot;name&quot;:&quot;kotlinx.serialization&quot;},&quot;Serialization&quot;,{&quot;name&quot;:&quot;kotlinx.coroutines&quot;},&quot;Coroutines&quot;]
</span></code></pre></div>
<h3 id="_7">允许特殊的浮点值<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>Allowing special floating-point values</p>
<p>By default, special floating-point values like <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-double/-na-n.html">Double.NaN</a> and infinities are not supported in JSON because the JSON specification prohibits it. You can enable their encoding using the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/allow-special-floating-point-values.html">allowSpecialFloatingPointValues</a> property:  </p>
<p>默认情况下，JSON 不支持 Double.NaN 和无穷大等特殊浮点值，因为 JSON 规范禁止这样做。可以使用 allowSpecialFloatingPointValues 属性启用其编码：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">allowSpecialFloatingPointValues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Data</span><span class="p">(</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">value</span><span class="p">:</span><span class="w"> </span><span class="kt">Double</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="p">)</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Data</span><span class="p">(</span><span class="kt">Double</span><span class="p">.</span><span class="na">NaN</span><span class="p">)</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-09.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>This example produces the following non-stardard JSON output, yet it is a widely used encoding for special values in JVM world:<br />
此示例生成以下非 stardard JSON 输出，但它是 JVM 世界中广泛使用的特殊值的编码：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>{&quot;value&quot;:NaN}
</span></code></pre></div>
<h3 id="_8">多态性的类鉴别器<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>Class discriminator for polymorphism</p>
<p>A key name that specifies a type when you have a polymorphic data can be specified in the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/class-discriminator.html">classDiscriminator</a> property:  </p>
<p>可以在 classDiscriminator 属性中指定具有多态数据时指定类型的键名称：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">classDiscriminator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;#class&quot;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="kd">sealed</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="p">}</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="nd">@Serializable</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="nd">@SerialName</span><span class="p">(</span><span class="s">&quot;owned&quot;</span><span class="p">)</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="kd">class</span><span class="w"> </span><span class="nc">OwnedProject</span><span class="p">(</span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Project</span><span class="p">()</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="p">:</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OwnedProject</span><span class="p">(</span><span class="s">&quot;kotlinx.coroutines&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-10.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>In combination with an explicitly specified <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-serial-name/index.html">SerialName</a> of the class it provides full control over the resulting JSON object:  </p>
<p>结合显式指定的类的 SerialName，它提供对生成的 JSON 对象的完全控制：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>{&quot;#class&quot;:&quot;owned&quot;,&quot;name&quot;:&quot;kotlinx.coroutines&quot;,&quot;owner&quot;:&quot;kotlin&quot;}
</span></code></pre></div>
<p>It is also possible to specify different class discriminators for different hierarchies. Instead of Json instance property, use <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-class-discriminator/index.html">JsonClassDiscriminator</a> annotation directly on base serializable class:  </p>
<p>也可以为不同的层次结构指定不同的类鉴别器。直接在基可序列化类上使用 JsonClassDiscriminator 注释，而不是 Json 实例属性：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nd">@JsonClassDiscriminator</span><span class="p">(</span><span class="s">&quot;message_type&quot;</span><span class="p">)</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="kd">sealed</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Base</span>
</span></code></pre></div>
<p>This annotation is <em>inheritable</em>, so all subclasses of <code>Base</code> will have the same discriminator:<br />
这个注解是可继承的，所以 的所有 <code>Base</code> 子类都具有相同的鉴别器：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nd">@Serializable</span><span class="w"> </span><span class="c1">// Class discriminator is inherited from Base</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kd">sealed</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">ErrorClass</span><span class="p">:</span><span class="w"> </span><span class="n">Base</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p>To learn more about inheritable serial annotations, see documentation for <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-inheritable-serial-info/index.html">InheritableSerialInfo</a>.<br />
若要了解有关可继承串行注解的详细信息，请参阅 InheritableSerialInfo 的文档。</p>
</blockquote>
<p>Note that it is not possible to explicitly specify different class discriminators in subclasses of <code>Base</code>. Only hierarchies with empty intersections can have different discriminators.<br />
请注意，不可能在 的 <code>Base</code> 子类中显式指定不同的类鉴别器。只有具有空交集的层次结构才能具有不同的鉴别器。</p>
<p>Discriminator specified in the annotation has priority over discriminator in Json configuration:<br />
在 Json 配置中，注解中指定的鉴别器优先于鉴别器：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">classDiscriminator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;#class&quot;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Message</span><span class="p">(</span><span class="n">BaseMessage</span><span class="p">(</span><span class="s">&quot;not found&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">GenericError</span><span class="p">(</span><span class="m">404</span><span class="p">))</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-11.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>As you can see, discriminator from the <code>Base</code> class is used:<br />
正如你所看到的，使用了类中的 <code>Base</code> 鉴别器：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>{&quot;message&quot;:{&quot;message_type&quot;:&quot;my.app.BaseMessage&quot;,&quot;message&quot;:&quot;not found&quot;},&quot;error&quot;:{&quot;message_type&quot;:&quot;my.app.GenericError&quot;,&quot;error_code&quot;:404}}
</span></code></pre></div>
<h3 id="_9">类鉴别器输出方式<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>Class discriminator output mode</p>
<p>Class discriminator provides information for serializing and deserializing <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/polymorphism.md#sealed-classes">polymorphic class hierarchies</a>. As shown above, it is only added for polymorphic classes by default. In case you want to encode more or less information for various third party APIs about types in the output, it is possible to control addition of the class discriminator with the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/class-discriminator-mode.html">JsonBuilder.classDiscriminatorMode</a> property.  </p>
<p>类鉴别器提供用于序列化和反序列化多态类层次结构的信息。如上所示，默认情况下仅为多态类添加它。如果要对有关输出中类型的各种第三方 API 的更多或更少信息进行编码，则可以使用 JsonBuilder.classDiscriminatorMode 属性控制类鉴别器的添加。</p>
<p>For example, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-class-discriminator-mode/-n-o-n-e/index.html">ClassDiscriminatorMode.NONE</a> does not add class discriminator at all, in case the receiving party is not interested in Kotlin types:  </p>
<p>例如，ClassDiscriminatorMode.NONE 根本不添加类鉴别器，以防接收方对 Kotlin 类型不感兴趣：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">classDiscriminatorMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClassDiscriminatorMode</span><span class="p">.</span><span class="na">NONE</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nd">@Serializable</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="kd">sealed</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="p">}</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="nd">@Serializable</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="kd">class</span><span class="w"> </span><span class="nc">OwnedProject</span><span class="p">(</span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Project</span><span class="p">()</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="p">:</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OwnedProject</span><span class="p">(</span><span class="s">&quot;kotlinx.coroutines&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-12.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>Note that it would be impossible to deserialize this output back with kotlinx.serialization.<br />
请注意，不可能使用 kotlinx.serialization 反序列化此输出。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>{&quot;name&quot;:&quot;kotlinx.coroutines&quot;,&quot;owner&quot;:&quot;kotlin&quot;}
</span></code></pre></div>
<p>Two other available values are <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-class-discriminator-mode/-p-o-l-y-m-o-r-p-h-i-c/index.html">ClassDiscriminatorMode.POLYMORPHIC</a> (default behavior) and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-class-discriminator-mode/-a-l-l_-j-s-o-n_-o-b-j-e-c-t-s/index.html">ClassDiscriminatorMode.ALL_JSON_OBJECTS</a> (adds discriminator whenever possible). Consult their documentation for details.  </p>
<p>另外两个可用值是 ClassDiscriminatorMode.POLYMORPHIC（默认行为）和 ClassDiscriminatorMode.ALL_JSON_OBJECTS（尽可能添加鉴别器）。有关详细信息，请参阅其文档。</p>
<h3 id="_10">以不区分大小写的方式解码枚举<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>Decoding enums in a case-insensitive manner </p>
<p><a href="https://kotlinlang.org/docs/coding-conventions.html#property-names">Kotlin&rsquo;s naming policy recommends</a> naming enum values using either uppercase underscore-separated names or upper camel case names. <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> uses exact Kotlin enum values names for decoding by default. However, sometimes third-party JSONs have such values named in lowercase or some mixed case. In this case, it is possible to decode enum values in a case-insensitive manner using <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/decode-enums-case-insensitive.html">JsonBuilder.decodeEnumsCaseInsensitive</a> property:  </p>
<p>Kotlin 的命名策略建议使用大写下划线分隔的名称或大写的驼峰大小写名称来命名枚举值。默认情况下，Json 使用精确的 Kotlin 枚举值名称进行解码。但是，有时第三方 JSON 具有以小写或混合大小写命名的此类值。在这种情况下，可以使用 JsonBuilder.decodeEnumsCaseInsensitive 属性以不区分大小写的方式解码枚举值：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">decodeEnumsCaseInsensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kd">enum</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Cases</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">VALUE_A</span><span class="p">,</span><span class="w"> </span><span class="nd">@JsonNames</span><span class="p">(</span><span class="s">&quot;Alternative&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">VALUE_B</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="nd">@Serializable</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">CasesList</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">cases</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Cases</span><span class="o">&gt;</span><span class="p">)</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">CasesList</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;{&quot;cases&quot;:[&quot;value_A&quot;, &quot;alternative&quot;]}&quot;&quot;&quot;</span><span class="p">))</span><span class="w"> </span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-13.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>It affects serial names as well as alternative names specified with <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-names/index.html">JsonNames</a> annotation, so both values are successfully decoded:  </p>
<p>它会影响序列化名称以及使用 JsonNames 注释指定的备用名称，因此这两个值都已成功解码：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>CasesList(cases=[VALUE_A, VALUE_B])
</span></code></pre></div>
<p>This property does not affect encoding in any way.<br />
此属性不会以任何方式影响编码。</p>
<h3 id="_11">全局命名策略<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>Global naming strategy</p>
<p>If properties&rsquo; names in Json input are different from Kotlin ones, it is recommended to specify the name for each property explicitly using <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md#serial-field-names"><code>@SerialName</code> annotation</a>. However, there are certain situations where transformation should be applied to every serial name — such as migration from other frameworks or legacy codebase. For that cases, it is possible to specify a <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-builder/naming-strategy.html">namingStrategy</a> for a <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> instance. <code>kotlinx.serialization</code> provides one strategy implementation out of the box, the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-naming-strategy/-builtins/-snake-case.html">JsonNamingStrategy.SnakeCase</a>:  </p>
<p>如果 Json 输入中的属性名称与 Kotlin 属性名称不同，建议使用 <code>@SerialName</code> 注释显式指定每个属性的名称。但是，在某些情况下，应将转换应用于每个序列化名称，例如从其他框架或旧代码库迁移。对于这种情况，可以为 Json 实例指定 namingStrategy。 <code>kotlinx.serialization</code> 提供了一个开箱即用的策略实现，即 JsonNamingStrategy.SnakeCase：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">projectName</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">projectOwner</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">namingStrategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonNamingStrategy</span><span class="p">.</span><span class="na">SnakeCase</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;{&quot;project_name&quot;:&quot;kotlinx.coroutines&quot;, &quot;project_owner&quot;:&quot;Kotlin&quot;}&quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">project</span><span class="p">.</span><span class="na">copy</span><span class="p">(</span><span class="n">projectName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)))</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-14.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>As you can see, both serialization and deserialization work as if all serial names are transformed from camel case to snake case:  </p>
<p>正如你所看到的，序列化和反序列化的工作方式就好像所有序列化名称都从骆驼大小写转换为蛇大小写一样：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>{&quot;project_name&quot;:&quot;kotlinx.serialization&quot;,&quot;project_owner&quot;:&quot;Kotlin&quot;}
</span></code></pre></div>
<p>There are some caveats one should remember while dealing with a <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-naming-strategy/index.html">JsonNamingStrategy</a>:<br />
在处理 JsonNamingStrategy 时，应该记住一些注意事项：</p>
<ul>
<li>
<p>Due to the nature of the <code>kotlinx.serialization</code> framework, naming strategy transformation is applied to all properties regardless of whether their serial name was taken from the property name or provided by <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-serial-name/index.html">SerialName</a> annotation. Effectively, it means one cannot avoid transformation by explicitly specifying the serial name. To be able to deserialize non-transformed names, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-names/index.html">JsonNames</a> annotation can be used instead.  </p>
<p>由于 <code>kotlinx.serialization</code> 框架的性质，命名策略转换将应用于所有属性，无论其序列化名称是从属性名称中获取还是由 SerialName 注解提供。实际上，这意味着无法通过显式指定序列化名称来避免转换。为了能够反序列化未转换的名称，可以改用 JsonNames 注释。</p>
</li>
<li>
<p>Collision of the transformed name with any other (transformed) properties serial names or any alternative names specified with <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-names/index.html">JsonNames</a> will lead to a deserialization exception.  </p>
<p>转换后的名称与任何其他（转换后的）属性、序列化名称或使用 JsonNames 指定的任何备用名称发生冲突将导致反序列化异常。</p>
</li>
<li>
<p>Global naming strategies are very implicit: by looking only at the definition of the class, it is impossible to determine which names it will have in the serialized form. As a consequence, naming strategies are not friendly to actions like Find Usages/Rename in IDE, full-text search by grep, etc. For them, the original name and the transformed are two different things; changing one without the other may introduce bugs in many unexpected ways and lead to greater maintenance efforts for code with global naming strategies.  </p>
<p>全局命名策略是非常隐含的：仅通过查看类的定义，无法确定它将在序列化形式中具有哪些名称。因此，命名策略对 IDE 中的 Find Usages/Rename、grep 全文搜索等操作不友好。对他们来说，原名和改造后是两回事;更改一个而不更改另一个可能会以许多意想不到的方式引入 bug，并导致对具有全局命名策略的代码进行更大的维护工作。</p>
</li>
</ul>
<p>Therefore, one should carefully weigh the pros and cons before considering adding global naming strategies to an application.  </p>
<p>因此，在考虑向应用程序添加全局命名策略之前，应仔细权衡利弊。</p>
<h2 id="json_3">Json 元素<a class="headerlink" href="#json_3" title="Permanent link">&para;</a></h2>
<p>Json elements</p>
<p>Aside from direct conversions between strings and JSON objects, Kotlin serialization offers APIs that allow other ways of working with JSON in the code. For example, you might need to tweak the data before it can parse or otherwise work with such an unstructured data that it does not readily fit into the typesafe world of Kotlin serialization.  </p>
<p>除了字符串和 JSON 对象之间的直接转换外，Kotlin 序列化还提供了允许在代码中以其他方式处理 JSON 的 API。例如，您可能需要先调整数据，然后才能解析数据或以其他方式处理此类非结构化数据，使其不容易适应 Kotlin 序列化的类型安全世界。</p>
<p>The main concept in this part of the library is <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a>. Read on to learn what you can do with it.  </p>
<p>库的这一部分的主要概念是 JsonElement。请继续阅读，了解您可以用它做什么。</p>
<h3 id="json_4">解析为 Json 元素<a class="headerlink" href="#json_4" title="Permanent link">&para;</a></h3>
<p>Parsing to Json element</p>
<p>A string can be <em>parsed</em> into an instance of <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a> with the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/parse-to-json-element.html">Json.parseToJsonElement</a> function. It is called neither decoding nor deserialization because none of that happens in the process. It just parses a JSON and forms an object representing it:  </p>
<p>可以使用 Json.parseToJsonElement 函数将字符串分析为 JsonElement 的实例。它既不被称为解码也不称为反序列化，因为在此过程中不会发生任何情况。它只是解析一个 JSON 并形成一个表示它的对象：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">parseToJsonElement</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="s">        {&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;}</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-15.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>A <code>JsonElement</code> prints itself as a valid JSON:<br />
A <code>JsonElement</code> 将自身打印为有效的 JSON：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;}
</span></code></pre></div>
<h3 id="json_5">Json 元素的类型<a class="headerlink" href="#json_5" title="Permanent link">&para;</a></h3>
<p>Types of Json elements</p>
<p>A <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a> class has three direct subtypes, closely following JSON grammar:  </p>
<p>JsonElement 类有三个直接子类型，严格遵循 JSON 语法：</p>
<ul>
<li>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive/index.html">JsonPrimitive</a> represents primitive JSON elements, such as string, number, boolean, and null. Each primitive has a simple string <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive/content.html">content</a>. There is also a <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive.html">JsonPrimitive()</a> constructor function overloaded to accept various primitive Kotlin types and to convert them to <code>JsonPrimitive</code>.  </p>
<p>JsonPrimitive 表示基元 JSON 元素，例如字符串、数字、布尔值和 null。每个基元都有一个简单的字符串内容。还有一个 JsonPrimitive（） 构造函数重载，用于接受各种原始 Kotlin 类型并将它们转换为 <code>JsonPrimitive</code> .</p>
</li>
<li>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-array/index.html">JsonArray</a> represents a JSON <code>[...]</code> array. It is a Kotlin <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/">List</a> of <code>JsonElement</code> items.<br />
    JsonArray 表示 JSON <code>[...]</code> 数组。它是 Kotlin 项目列表 <code>JsonElement</code> 。</p>
</li>
<li>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-object/index.html">JsonObject</a> represents a JSON <code>{...}</code> object. It is a Kotlin <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/">Map</a> from <code>String</code> keys to <code>JsonElement</code> values.<br />
    JsonObject 表示 JSON <code>{...}</code> 对象。它是从 <code>String</code> 键到 <code>JsonElement</code> 值的 Kotlin 映射。</p>
</li>
</ul>
<p>The <code>JsonElement</code> class has extensions that cast it to its corresponding subtypes: <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/json-primitive.html">jsonPrimitive</a>, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/json-array.html">jsonArray</a>, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/json-object.html">jsonObject</a>. The <code>JsonPrimitive</code> class, in turn, provides converters to Kotlin primitive types: <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/int.html">int</a>, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/int-or-null.html">intOrNull</a>, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/long.html">long</a>, <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/long-or-null.html">longOrNull</a>, and similar ones for other types. This is how you can use them for processing JSON whose structure you know:  </p>
<p>该 <code>JsonElement</code> 类具有将其转换为其相应子类型的扩展：jsonPrimitive、jsonArray、jsonObject。反过来，该 <code>JsonPrimitive</code> 类提供 Kotlin 基元类型的转换器：int、intOrNull、long、longOrNull 和其他类型的类似转换器。以下是如何使用它们来处理您知道其结构的 JSON：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">parseToJsonElement</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="s">        {</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="s">            &quot;name&quot;: &quot;kotlinx.serialization&quot;,</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="s">            &quot;forks&quot;: [{&quot;votes&quot;: 42}, {&quot;votes&quot;: 9000}, {}]</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="s">        }</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">        </span><span class="p">.</span><span class="na">jsonObject</span><span class="o">[</span><span class="s">&quot;forks&quot;</span><span class="o">]!!</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">        </span><span class="p">.</span><span class="na">jsonArray</span><span class="p">.</span><span class="na">sumOf</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">jsonObject</span><span class="o">[</span><span class="s">&quot;votes&quot;</span><span class="o">]?.</span><span class="na">jsonPrimitive</span><span class="o">?.</span><span class="na">int</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">sum</span><span class="p">)</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-16.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The above example sums <code>votes</code> in all objects in the <code>forks</code> array, ignoring the objects that have no <code>votes</code>:  </p>
<p>上面的例子对 <code>votes</code> <code>forks</code> 数组中的所有对象求和，忽略没有 <code>votes</code> 的对象：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>9042
</span></code></pre></div>
<p>Note that the execution will fail if the structure of the data is otherwise different.<br />
请注意，如果数据结构在其他方面不同，则执行将失败。</p>
<h3 id="json_6">Json 元素生成器<a class="headerlink" href="#json_6" title="Permanent link">&para;</a></h3>
<p>Json element builders</p>
<p>You can construct instances of specific <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a> subtypes using the respective builder functions <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/build-json-array.html">buildJsonArray</a> and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/build-json-object.html">buildJsonObject</a>. They provide a DSL to define the resulting JSON structure. It is similar to Kotlin standard library collection builders, but with a JSON-specific convenience of more type-specific overloads and inner builder functions. The following example shows all the key features:  </p>
<p>您可以使用相应的构建器函数 buildJsonArray 和 buildJsonObject 构造特定 JsonElement 子类型的实例。它们提供了一个 DSL 来定义生成的 JSON 结构。它类似于 Kotlin 标准库集合构建器，但具有特定于 JSON 的便利性，包括更多特定于类型的重载和内部构建器函数。以下示例显示了所有关键功能：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">        </span><span class="n">putJsonObject</span><span class="p">(</span><span class="s">&quot;owner&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">            </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">        </span><span class="n">putJsonArray</span><span class="p">(</span><span class="s">&quot;forks&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">            </span><span class="n">addJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">                </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;votes&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">42</span><span class="p">)</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">            </span><span class="n">addJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">                </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;votes&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">9000</span><span class="p">)</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-17.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>As a result, you get a proper JSON string:<br />
因此，你会得到一个正确的 JSON 字符串：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;owner&quot;:{&quot;name&quot;:&quot;kotlin&quot;},&quot;forks&quot;:[{&quot;votes&quot;:42},{&quot;votes&quot;:9000}]}
</span></code></pre></div>
<h3 id="json_7">解码 Json 元素<a class="headerlink" href="#json_7" title="Permanent link">&para;</a></h3>
<p>Decoding Json elements</p>
<p>An instance of the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a> class can be decoded into a serializable object using the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/decode-from-json-element.html">Json.decodeFromJsonElement</a> function:  </p>
<p>可以使用 Json.decodeFromJsonElement 函数将 JsonElement 类的实例解码为可序列化对象：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;language&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromJsonElement</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-18.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The result is exactly what you would expect:<br />
结果正是您所期望的：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>Project(name=kotlinx.serialization, language=Kotlin)
</span></code></pre></div>
<h3 id="json_8">对文字 Json 内容进行编码（实验性）<a class="headerlink" href="#json_8" title="Permanent link">&para;</a></h3>
<p>Encoding literal Json content (experimental)</p>
<blockquote>
<p>This functionality is experimental and requires opting-in to <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/compatibility.md#experimental-api">the experimental Kotlinx Serialization API</a>.<br />
此功能是实验性的，需要选择加入实验性的 Kotlinx 序列化 API。</p>
</blockquote>
<p>In some cases it might be necessary to encode an arbitrary unquoted value. This can be achieved with <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-unquoted-literal.html">JsonUnquotedLiteral</a>.  </p>
<p>在某些情况下，可能需要对任意不带引号的值进行编码。这可以通过 JsonUnquotedLiteral 实现。</p>
<h4 id="large-decimal">序列化large decimal类型数字<a class="headerlink" href="#large-decimal" title="Permanent link">&para;</a></h4>
<p>Serializing large decimal numbers</p>
<p>The JSON specification does not restrict the size or precision of numbers, however it is not possible to serialize numbers of arbitrary size or precision using <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive.html">JsonPrimitive()</a>.  </p>
<p>JSON 规范不限制数字的大小或精度，但是无法使用 JsonPrimitive（） 序列化任意大小或精度的数字。</p>
<p>If <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-double/">Double</a> is used, then the numbers are limited in precision, meaning that large numbers are truncated. When using Kotlin/JVM <a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html">BigDecimal</a> can be used instead, but <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive.html">JsonPrimitive()</a> will encode the value as a string, not a number.  </p>
<p>如果使用 Double，则数字的精度有限，这意味着大数字会被截断。使用 Kotlin/JVM 时，可以改用 BigClimal，但 JsonPrimitive（） 会将值编码为字符串，而不是数字。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">prettyPrint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;3.141592653589793238462643383279&quot;</span><span class="p">)</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonDouble</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonPrimitive</span><span class="p">(</span><span class="n">pi</span><span class="p">.</span><span class="na">toDouble</span><span class="p">())</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonPrimitive</span><span class="p">(</span><span class="n">pi</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;pi_double&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">piJsonDouble</span><span class="p">)</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;pi_string&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">piJsonString</span><span class="p">)</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">piObject</span><span class="p">))</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-19.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>Even though <code>pi</code> was defined as a number with 30 decimal places, the resulting JSON does not reflect this. The <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-double/">Double</a> value is truncated to 15 decimal places, and the String is wrapped in quotes - which is not a JSON number.  </p>
<p>尽管 <code>pi</code> 被定义为小数点后 30 位的数字，但生成的 JSON 并未反映这一点。Double 值被截断到小数点后 15 位，String 用引号括起来 - 这不是 JSON 数字。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>{
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>    &quot;pi_double&quot;: 3.141592653589793,
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>    &quot;pi_string&quot;: &quot;3.141592653589793238462643383279&quot;
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>}
</span></code></pre></div>
<p>To avoid precision loss, the string value of <code>pi</code> can be encoded using <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-unquoted-literal.html">JsonUnquotedLiteral</a>.  </p>
<p>为了避免精度损失，可以使用 JsonUnquotedLiteral 对 的 <code>pi</code> 字符串值进行编码。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">prettyPrint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="s">&quot;3.141592653589793238462643383279&quot;</span><span class="p">)</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">    </span><span class="c1">// use JsonUnquotedLiteral to encode raw JSON content</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonLiteral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonUnquotedLiteral</span><span class="p">(</span><span class="n">pi</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonDouble</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonPrimitive</span><span class="p">(</span><span class="n">pi</span><span class="p">.</span><span class="na">toDouble</span><span class="p">())</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonPrimitive</span><span class="p">(</span><span class="n">pi</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildJsonObject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;pi_literal&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">piJsonLiteral</span><span class="p">)</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;pi_double&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">piJsonDouble</span><span class="p">)</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;pi_string&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">piJsonString</span><span class="p">)</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">format</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">piObject</span><span class="p">))</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-20.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p><code>pi_literal</code> now accurately matches the value defined.<br />
<code>pi_literal</code> 现在与定义的值准确匹配。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>{
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>    &quot;pi_literal&quot;: 3.141592653589793238462643383279,
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>    &quot;pi_double&quot;: 3.141592653589793,
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>    &quot;pi_string&quot;: &quot;3.141592653589793238462643383279&quot;
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>}
</span></code></pre></div>
<p>To decode <code>pi</code> back to a <a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html">BigDecimal</a>, the string content of the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive/index.html">JsonPrimitive</a> can be used.</p>
<p>若要解码 <code>pi</code> 回 BigDecimal，可以使用 JsonPrimitive 的字符串内容。</p>
<p>(This demonstration uses a <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive/index.html">JsonPrimitive</a> for simplicity. For a more re-usable method of handling serialization, see <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/json.md#json-transformations">Json Transformations</a> below.)  </p>
<p>（为简单起见，此演示使用 JsonPrimitive。有关处理序列化的更可重用的方法，请参阅下面的 Json 转换。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piObjectJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="s">          {</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="s">              &quot;pi_literal&quot;: 3.141592653589793238462643383279</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="s">          }</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="s">      &quot;&quot;&quot;</span><span class="p">.</span><span class="na">trimIndent</span><span class="p">()</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piObject</span><span class="p">:</span><span class="w"> </span><span class="n">JsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="p">(</span><span class="n">piObjectJson</span><span class="p">)</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">piJsonLiteral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">piObject</span><span class="o">[</span><span class="s">&quot;pi_literal&quot;</span><span class="o">]!!</span><span class="p">.</span><span class="na">jsonPrimitive</span><span class="p">.</span><span class="na">content</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BigDecimal</span><span class="p">(</span><span class="n">piJsonLiteral</span><span class="p">)</span>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-21.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The exact value of <code>pi</code> is decoded, with all 30 decimal places of precision that were in the source JSON.<br />
对 的 <code>pi</code> 确切值进行解码，并具有源 JSON 中的所有 30 位小数精度。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>3.141592653589793238462643383279
</span></code></pre></div>
<h4 id="jsonunquotedliteral-null">禁止用于 <code>JsonUnquotedLiteral</code> 创建 的 <code>null</code> 文字未加引号的值<a class="headerlink" href="#jsonunquotedliteral-null" title="Permanent link">&para;</a></h4>
<p>Using <code>JsonUnquotedLiteral</code> to create a literal unquoted value of <code>null</code> is forbidden</p>
<p>To avoid creating an inconsistent state, encoding a String equal to <code>"null"</code> is forbidden. Use <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-null/index.html">JsonNull</a> or <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-primitive/index.html">JsonPrimitive</a> instead.  </p>
<p>为避免创建不一致的状态，禁止对等于 的 <code>"null"</code> 字符串进行编码。请改用 JsonNull 或 JsonPrimitive。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="c1">// caution: creating null with JsonUnquotedLiteral will cause an exception! </span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="n">JsonUnquotedLiteral</span><span class="p">(</span><span class="s">&quot;null&quot;</span><span class="p">)</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-22.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>Exception in thread &quot;main&quot; kotlinx.serialization.json.internal.JsonEncodingException: Creating a literal unquoted value of &#39;null&#39; is forbidden. If you want to create JSON null literal, use JsonNull object, otherwise, use JsonPrimitive
</span></code></pre></div>
<h2 id="json_9">Json 转换<a class="headerlink" href="#json_9" title="Permanent link">&para;</a></h2>
<p>Json transformations</p>
<p>To affect the shape and contents of JSON output after serialization, or adapt input to deserialization, it is possible to write a <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md">custom serializer</a>. However, it may be inconvenient to carefully follow <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization.encoding/-encoder/index.html">Encoder</a> and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization.encoding/-decoder/index.html">Decoder</a> calling conventions, especially for relatively small and easy tasks. For that purpose, Kotlin serialization provides an API that can reduce the burden of implementing a custom serializer to a problem of manipulating a Json elements tree.  </p>
<p>若要在序列化后影响 JSON 输出的形状和内容，或使输入适应反序列化，可以编写自定义序列化程序。但是，仔细遵循编码器和解码器调用约定可能会带来不便，尤其是对于相对较小的简单任务。为此，Kotlin 序列化提供了一个 API，可以将实现自定义序列化程序的负担减少到操作 Json 元素树的问题。</p>
<p>We recommend that you get familiar with the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md">Serializers</a> chapter: among other things, it explains how custom serializers are bound to classes.<br />
我们建议您熟悉序列化程序一章：除其他内容外，它还解释了自定义序列化程序如何绑定到类。</p>
<p>Transformation capabilities are provided by the abstract <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-transforming-serializer/index.html">JsonTransformingSerializer</a> class which implements <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-k-serializer/index.html">KSerializer</a>. Instead of direct interaction with <code>Encoder</code> or <code>Decoder</code>, this class asks you to supply transformations for JSON tree represented by the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-element/index.html">JsonElement</a> class using the<code>transformSerialize</code> and <code>transformDeserialize</code> methods. Let&rsquo;s take a look at the examples.  </p>
<p>转换功能由实现 KSerializer 的抽象 JsonTransformingSerializer 类提供。此类不直接与 <code>Encoder</code> 或 <code>Decoder</code> 交互，而是要求您使用 <code>transformSerialize</code> and <code>transformDeserialize</code> 方法为 JsonElement 类表示的 JSON 树提供转换。让我们看一下这些例子。</p>
<h3 id="_12">数组包装<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>Array wrapping</p>
<p>The first example is an implementation of JSON array wrapping for lists.<br />
第一个示例是列表的 JSON 数组包装的实现。</p>
<p>Consider a REST API that returns a JSON array of <code>User</code> objects, or a single object (not wrapped into an array) if there is only one element in the result.  </p>
<p>考虑返回 <code>User</code> 对象的 JSON 数组的 REST API，如果结果中只有一个元素，则返回单个对象（未包装到数组中）。</p>
<p>In the data model, use the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-serializable/index.html"><code>@Serializable</code></a> annotation to specify a custom serializer for a <code>users: List&lt;User&gt;</code> property.  </p>
<p>在数据模型中，使用 <code>@Serializable</code> 注解为 <code>users: List&lt;User&gt;</code> 属性指定自定义序列化程序。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="nd">@Serializable</span><span class="p">(</span><span class="n">with</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserListSerializer</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">users</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="p">)</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="nd">@Serializable</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span></code></pre></div>
<p>Since this example covers only the deserialization case, you can implement <code>UserListSerializer</code> and override only the <code>transformDeserialize</code> function. The <code>JsonTransformingSerializer</code> constructor takes an original serializer as parameter (this approach is shown in the section <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md#constructing-collection-serializers">Constructing collection serializers</a>):  </p>
<p>由于此示例仅涵盖反序列化情况，因此只能实现 <code>UserListSerializer</code> 和重写该 <code>transformDeserialize</code> 函数。 <code>JsonTransformingSerializer</code> 构造函数采用原始序列化程序作为参数（此方法在构造集合序列化程序一节中显示）：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kd">object</span><span class="w"> </span><span class="nc">UserListSerializer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">JsonTransformingSerializer</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">ListSerializer</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="na">serializer</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">    </span><span class="c1">// If response is not an array, then it is a single object that should be wrapped into the array</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">transformDeserialize</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="n">JsonElement</span><span class="p">):</span><span class="w"> </span><span class="n">JsonElement</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">element</span><span class="w"> </span><span class="k">!is</span><span class="w"> </span><span class="n">JsonArray</span><span class="p">)</span><span class="w"> </span><span class="n">JsonArray</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="n">element</span><span class="p">))</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">element</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>Now you can test the code with a JSON array or a single JSON object as inputs.  </p>
<p>现在，您可以使用 JSON 数组或单个 JSON 对象作为输入来测试代码。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="s">        {&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;users&quot;:{&quot;name&quot;:&quot;kotlin&quot;}}</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">))</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="s">        {&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;users&quot;:[{&quot;name&quot;:&quot;kotlin&quot;},{&quot;name&quot;:&quot;jetbrains&quot;}]}</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="s">    &quot;&quot;&quot;</span><span class="p">))</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-23.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>The output shows that both cases are correctly deserialized into a Kotlin <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/">List</a>.  </p>
<p>输出显示，这两种情况都已正确反序列化为 Kotlin List。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>Project(name=kotlinx.serialization, users=[User(name=kotlin)])
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>Project(name=kotlinx.serialization, users=[User(name=kotlin), User(name=jetbrains)])
</span></code></pre></div>
<h3 id="_13">数组解包<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>Array unwrapping</p>
<p>You can also implement the <code>transformSerialize</code> function to unwrap a single-element list into a single JSON object during serialization:  </p>
<p>您还可以实现在序列化期间将单个元素列表解包为单个 JSON 对象的 <code>transformSerialize</code> 函数：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">transformSerialize</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="n">JsonElement</span><span class="p">):</span><span class="w"> </span><span class="n">JsonElement</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">        </span><span class="n">require</span><span class="p">(</span><span class="n">element</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">JsonArray</span><span class="p">)</span><span class="w"> </span><span class="c1">// this serializer is used only with lists</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">singleOrNull</span><span class="p">()</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">element</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>Now, if you serialize a single-element list of objects from Kotlin:<br />
现在，如果您从 Kotlin 序列化对象的单元素列表：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="s">&quot;kotlin&quot;</span><span class="p">)))</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-24.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>You end up with a single JSON object, not an array with one element:<br />
你最终会得到一个 JSON 对象，而不是一个包含一个元素的数组：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;users&quot;:{&quot;name&quot;:&quot;kotlin&quot;}}
</span></code></pre></div>
<h3 id="_14">操作默认值<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>Manipulating default values</p>
<p>Another kind of useful transformation is omitting specific values from the output JSON, for example, if it is used as default when missing or for other reasons.  </p>
<p>另一种有用的转换是从输出 JSON 中省略特定值，例如，如果缺少该值或出于其他原因将其用作默认值。</p>
<p>Imagine that you cannot specify a default value for the <code>language</code> property in the <code>Project</code> data model for some reason, but you need it omitted from the JSON when it is equal to <code>Kotlin</code> (we can all agree that Kotlin should be default anyway). You can fix it by writing the special <code>ProjectSerializer</code> based on the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md#plugin-generated-serializer">Plugin-generated serializer</a> for the <code>Project</code> class.  </p>
<p>想象一下，由于某种原因，您无法为 <code>Project</code> 数据模型中的 <code>language</code> 属性指定默认值，但是当它等于时 <code>Kotlin</code> ，您需要从 JSON 中省略它（我们都同意 Kotlin 无论如何都应该是默认值）。您可以通过根据 Plugin 为 <code>Project</code> 类生成的序列化程序编写特殊 <code>ProjectSerializer</code> 代码来修复它。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">language</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="kd">object</span><span class="w"> </span><span class="nc">ProjectSerializer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">JsonTransformingSerializer</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Project</span><span class="p">.</span><span class="na">serializer</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">transformSerialize</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="n">JsonElement</span><span class="p">):</span><span class="w"> </span><span class="n">JsonElement</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="w">        </span><span class="c1">// Filter out top-level key value pair with the key &quot;language&quot; and the value &quot;Kotlin&quot;</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="w">        </span><span class="n">JsonObject</span><span class="p">(</span><span class="n">element</span><span class="p">.</span><span class="na">jsonObject</span><span class="p">.</span><span class="na">filterNot</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="w">            </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;language&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="na">jsonPrimitive</span><span class="p">.</span><span class="na">content</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="p">}</span>
</span></code></pre></div>
<p>In the example below, we are serializing the <code>Project</code> class at the top-level, so we explicitly pass the above <code>ProjectSerializer</code> to <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/encode-to-string.html">Json.encodeToString</a> function as was shown in the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md#passing-a-serializer-manually">Passing a serializer manually</a> section:  </p>
<p>在下面的示例中，我们在顶层序列化 <code>Project</code> 该类，因此我们将上述 <code>ProjectSerializer</code> 内容显式传递给 Json.encodeToString 函数，如手动传递序列化程序部分所示：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Kotlin&quot;</span><span class="p">)</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="w"> </span><span class="c1">// using plugin-generated serializer</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">ProjectSerializer</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">))</span><span class="w"> </span><span class="c1">// using custom serializer</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-25.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>See the effect of the custom serializer:<br />
查看自定义序列化程序的效果：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;language&quot;:&quot;Kotlin&quot;}
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>{&quot;name&quot;:&quot;kotlinx.serialization&quot;}
</span></code></pre></div>
<h3 id="_15">基于内容的多态反序列化<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>Content-based polymorphic deserialization</p>
<p>Typically, <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/polymorphism.md">polymorphic serialization</a> requires a dedicated <code>"type"</code> key (also known as <em>class discriminator</em>) in the incoming JSON object to determine the actual serializer which should be used to deserialize Kotlin class.  </p>
<p>通常，多态序列化需要在传入的 JSON 对象中使用专用 <code>"type"</code> 键（也称为类鉴别器）来确定应用于反序列化 Kotlin 类的实际序列化程序。</p>
<p>However, sometimes the <code>type</code> property may not be present in the input. In this case, you need to guess the actual type by the shape of JSON, for example by the presence of a specific key.  </p>
<p>但是，有时该 <code>type</code> 属性可能不存在于输入中。在这种情况下，您需要通过 JSON 的形状来猜测实际类型，例如通过特定键的存在来猜测。</p>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-content-polymorphic-serializer/index.html">JsonContentPolymorphicSerializer</a> provides a skeleton implementation for such a strategy. To use it, override its <code>selectDeserializer</code> method. Let&rsquo;s start with the following class hierarchy.  </p>
<p>JsonContentPolymorphicSerializer 为此类策略提供了框架实现。若要使用它，请重写其 <code>selectDeserializer</code> 方法。让我们从以下类层次结构开始。</p>
<blockquote>
<p>Note that is does not have to be <code>sealed</code> as recommended in the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/polymorphism.md#sealed-classes">Sealed classes</a> section, because we are not going to take advantage of the plugin-generated code that automatically selects the appropriate subclass, but are going to implement this code manually.  </p>
<p>请注意，这不必 <code>sealed</code> 按照 Sealed classes 部分的建议进行，因为我们不会利用插件生成的代码来自动选择适当的子类，而是将手动实现此代码。</p>
</blockquote>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="p">}</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="nd">@Serializable</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">BasicProject</span><span class="p">(</span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">):</span><span class="w"> </span><span class="n">Project</span><span class="p">()</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="nd">@Serializable</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">OwnedProject</span><span class="p">(</span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Project</span><span class="p">()</span>
</span></code></pre></div>
<p>You can distinguish the <code>BasicProject</code> and <code>OwnedProject</code> subclasses by the presence of the <code>owner</code> key in the JSON object.  </p>
<p>您可以通过 JSON 对象中 <code>owner</code> 是否存在键来区分 <code>BasicProject</code> 和 <code>OwnedProject</code> 子类。</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="kd">object</span><span class="w"> </span><span class="nc">ProjectSerializer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">JsonContentPolymorphicSerializer</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Project</span><span class="o">::</span><span class="n">class</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">selectDeserializer</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="n">JsonElement</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">        </span><span class="s">&quot;owner&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">jsonObject</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">OwnedProject</span><span class="p">.</span><span class="na">serializer</span><span class="p">()</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">BasicProject</span><span class="p">.</span><span class="na">serializer</span><span class="p">()</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="p">}</span>
</span></code></pre></div>
<p>When you use this serializer to serialize data, either <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/polymorphism.md#registered-subclasses">registered</a> or the default serializer is selected for the actual type at runtime:  </p>
<p>使用此序列化程序序列化数据时，将在运行时为实际类型选择已注册或默认序列化程序：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">        </span><span class="n">OwnedProject</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kotlin&quot;</span><span class="p">),</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">        </span><span class="n">BasicProject</span><span class="p">(</span><span class="s">&quot;example&quot;</span><span class="p">)</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">ListSerializer</span><span class="p">(</span><span class="n">ProjectSerializer</span><span class="p">),</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="p">(</span><span class="n">ListSerializer</span><span class="p">(</span><span class="n">ProjectSerializer</span><span class="p">),</span><span class="w"> </span><span class="n">string</span><span class="p">))</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-26.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>No class discriminator is added in the JSON output:<br />
JSON 输出中未添加类鉴别器：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>[{&quot;name&quot;:&quot;kotlinx.serialization&quot;,&quot;owner&quot;:&quot;kotlin&quot;},{&quot;name&quot;:&quot;example&quot;}]
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>[OwnedProject(name=kotlinx.serialization, owner=kotlin), BasicProject(name=example)]
</span></code></pre></div>
<h3 id="_16">（实验性）<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>Under the hood (experimental) </p>
<p>Although abstract serializers mentioned above can cover most of the cases, it is possible to implement similar machinery manually, using only the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization/-k-serializer/index.html">KSerializer</a> class. If tweaking the abstract methods <code>transformSerialize</code>/<code>transformDeserialize</code>/<code>selectDeserializer</code> is not enough, then altering <code>serialize</code>/<code>deserialize</code> is a way to go.  </p>
<p>尽管上面提到的抽象序列化程序可以涵盖大多数情况，但可以仅使用 KSerializer 类手动实现类似的机制。如果调整抽象方法 <code>transformSerialize</code> / <code>transformDeserialize</code> / <code>selectDeserializer</code> 还不够，那么改变 <code>serialize</code> / <code>deserialize</code> 是一条路。</p>
<p>Here are some useful things about custom serializers with <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a>:  </p>
<p>以下是有关使用 Json 的自定义序列化程序的一些有用信息：</p>
<ul>
<li>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization.encoding/-encoder/index.html">Encoder</a> can be cast to <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-encoder/index.html">JsonEncoder</a>, and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-core/kotlinx.serialization.encoding/-decoder/index.html">Decoder</a> to <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-decoder/index.html">JsonDecoder</a>, if the current format is <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a>.  </p>
<p>如果当前格式为 Json，则可以将 Encoder 转换为 JsonEncoder，将 Decoder 转换为 JsonDecoder。
- <code>JsonDecoder</code> has the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-decoder/decode-json-element.html">decodeJsonElement</a> method and <code>JsonEncoder</code> has the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-encoder/encode-json-element.html">encodeJsonElement</a> method, which basically retrieve an element from and insert an element to a current position in the stream.  </p>
<p><code>JsonDecoder</code> 具有 decodeJsonElement 方法和 <code>JsonEncoder</code> encodeJsonElement 方法，该方法基本上从流中检索元素并将元素插入到流中的当前位置。</p>
</li>
<li>
<p>Both <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-decoder/json.html"><code>JsonDecoder</code></a> and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json-encoder/json.html"><code>JsonEncoder</code></a> have the <code>json</code> property, which returns <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> instance with all settings that are currently in use.  </p>
<p>两者都 <code>JsonDecoder</code> <code>JsonEncoder</code> 具有属性 <code>json</code> ，该属性返回包含当前正在使用的所有设置的 Json 实例。</p>
</li>
<li>
<p><a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/-json/index.html">Json</a> has the <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/encode-to-json-element.html">encodeToJsonElement</a> and <a href="https://kotlinlang.org/api/kotlinx.serialization/kotlinx-serialization-json/kotlinx.serialization.json/decode-from-json-element.html">decodeFromJsonElement</a> methods.  </p>
<p>Json 具有 encodeToJsonElement 和 decodeFromJsonElement 方法。</p>
</li>
</ul>
<p>Given all that, it is possible to implement two-stage conversion <code>Decoder -&gt; JsonElement -&gt; value</code> or <code>value -&gt; JsonElement -&gt; Encoder</code>. For example, you can implement a fully custom serializer for the following <code>Response</code> class so that its <code>Ok</code> subclass is represented directly, but the <code>Error</code> subclass is represented by an object with the error message:  </p>
<p>鉴于所有这些，可以实现两级转换 <code>Decoder -&gt; JsonElement -&gt; value</code> 或 <code>value -&gt; JsonElement -&gt; Encoder</code> .例如，您可以为以下 <code>Response</code> 类实现完全自定义的序列化程序，以便直接表示其 <code>Ok</code> 子类，但该 <code>Error</code> 子类由带有错误消息的对象表示：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nd">@Serializable</span><span class="p">(</span><span class="n">with</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResponseSerializer</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="kd">sealed</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Response</span><span class="o">&lt;</span><span class="k">out</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Ok</span><span class="o">&lt;</span><span class="k">out</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="p">:</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Response</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Error</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">message</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Response</span><span class="o">&lt;</span><span class="n">Nothing</span><span class="o">&gt;</span><span class="p">()</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="p">}</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="kd">class</span><span class="w"> </span><span class="nc">ResponseSerializer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSerializer</span><span class="p">:</span><span class="w"> </span><span class="n">KSerializer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">KSerializer</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">descriptor</span><span class="p">:</span><span class="w"> </span><span class="n">SerialDescriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildSerialDescriptor</span><span class="p">(</span><span class="s">&quot;Response&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">PolymorphicKind</span><span class="p">.</span><span class="na">SEALED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">        </span><span class="n">element</span><span class="p">(</span><span class="s">&quot;Ok&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">dataSerializer</span><span class="p">.</span><span class="na">descriptor</span><span class="p">)</span>
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w">        </span><span class="n">element</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buildClassSerialDescriptor</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-11"><a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">          </span><span class="n">element</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">)</span>
</span><span id="__span-60-12"><a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__span-60-13"><a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-14"><a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a>
</span><span id="__span-60-15"><a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deserialize</span><span class="p">(</span><span class="n">decoder</span><span class="p">:</span><span class="w"> </span><span class="n">Decoder</span><span class="p">):</span><span class="w"> </span><span class="n">Response</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-16"><a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a><span class="w">        </span><span class="c1">// Decoder -&gt; JsonDecoder</span>
</span><span id="__span-60-17"><a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="w">        </span><span class="n">require</span><span class="p">(</span><span class="n">decoder</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">JsonDecoder</span><span class="p">)</span><span class="w"> </span><span class="c1">// this class can be decoded only by Json</span>
</span><span id="__span-60-18"><a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">        </span><span class="c1">// JsonDecoder -&gt; JsonElement</span>
</span><span id="__span-60-19"><a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="na">decodeJsonElement</span><span class="p">()</span>
</span><span id="__span-60-20"><a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">        </span><span class="c1">// JsonElement -&gt; value</span>
</span><span id="__span-60-21"><a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">element</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">JsonObject</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">element</span><span class="p">)</span>
</span><span id="__span-60-22"><a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">Error</span><span class="p">(</span><span class="n">element</span><span class="o">[</span><span class="s">&quot;error&quot;</span><span class="o">]!!</span><span class="p">.</span><span class="na">jsonPrimitive</span><span class="p">.</span><span class="na">content</span><span class="p">)</span>
</span><span id="__span-60-23"><a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">Ok</span><span class="p">(</span><span class="n">decoder</span><span class="p">.</span><span class="na">json</span><span class="p">.</span><span class="na">decodeFromJsonElement</span><span class="p">(</span><span class="n">dataSerializer</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">))</span>
</span><span id="__span-60-24"><a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-25"><a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a>
</span><span id="__span-60-26"><a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">encoder</span><span class="p">:</span><span class="w"> </span><span class="n">Encoder</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="n">Response</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-27"><a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">        </span><span class="c1">// Encoder -&gt; JsonEncoder</span>
</span><span id="__span-60-28"><a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="w">        </span><span class="n">require</span><span class="p">(</span><span class="n">encoder</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">JsonEncoder</span><span class="p">)</span><span class="w"> </span><span class="c1">// This class can be encoded only by Json</span>
</span><span id="__span-60-29"><a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a><span class="w">        </span><span class="c1">// value -&gt; JsonElement</span>
</span><span id="__span-60-30"><a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-31"><a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a><span class="w">            </span><span class="k">is</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">Ok</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">encoder</span><span class="p">.</span><span class="na">json</span><span class="p">.</span><span class="na">encodeToJsonElement</span><span class="p">(</span><span class="n">dataSerializer</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">data</span><span class="p">)</span>
</span><span id="__span-60-32"><a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a><span class="w">            </span><span class="k">is</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">Error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">buildJsonObject</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">message</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-60-33"><a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-60-34"><a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a><span class="w">        </span><span class="c1">// JsonElement -&gt; JsonEncoder</span>
</span><span id="__span-60-35"><a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a><span class="w">        </span><span class="n">encoder</span><span class="p">.</span><span class="na">encodeJsonElement</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span id="__span-60-36"><a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-37"><a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a><span class="p">}</span>
</span></code></pre></div>
<p>Having this serializable <code>Response</code> implementation, you can take any serializable payload for its data and serialize or deserialize the corresponding responses:  </p>
<p>有了这个可 <code>Response</code> 序列化的实现，你可以为其数据获取任何可序列化的有效负载，并序列化或反序列化相应的响应：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="nd">@Serializable</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Project</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">responses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">        </span><span class="n">Response</span><span class="p">.</span><span class="na">Ok</span><span class="p">(</span><span class="n">Project</span><span class="p">(</span><span class="s">&quot;kotlinx.serialization&quot;</span><span class="p">)),</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="w">        </span><span class="n">Response</span><span class="p">.</span><span class="na">Error</span><span class="p">(</span><span class="s">&quot;Not found&quot;</span><span class="p">)</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Json</span><span class="p">.</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="n">string</span><span class="p">))</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-27.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<p>This gives you fine-grained control on the representation of the <code>Response</code> class in the JSON output:<br />
这使您可以对 JSON 输出中 <code>Response</code> 类的表示形式进行细粒度控制：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>[{&quot;name&quot;:&quot;kotlinx.serialization&quot;},{&quot;error&quot;:&quot;Not found&quot;}]
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>[Ok(data=Project(name=kotlinx.serialization)), Error(message=Not found)]
</span></code></pre></div>
<h3 id="json_10">维护自定义 JSON 属性<a class="headerlink" href="#json_10" title="Permanent link">&para;</a></h3>
<p>Maintaining custom JSON attributes</p>
<p>A good example of custom JSON-specific serializer would be a deserializer that packs all unknown JSON properties into a dedicated field of <code>JsonObject</code> type.  </p>
<p>特定于 JSON 的自定义序列化程序的一个很好的示例是反序列化程序，它将所有未知的 JSON 属性打包到一个专用的 <code>JsonObject</code> 类型字段中。</p>
<p>Let&rsquo;s add <code>UnknownProject</code> – a class with the <code>name</code> property and arbitrary details flattened into the same object:  </p>
<p>让我们添加 <code>UnknownProject</code> 一个类， <code>name</code> 其中属性和任意细节被平展到同一个对象中：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">UnknownProject</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">details</span><span class="p">:</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">)</span>
</span></code></pre></div>
<p>However, the default plugin-generated serializer requires details to be a separate JSON object and that&rsquo;s not what we want.  </p>
<p>但是，默认插件生成的序列化程序要求详细信息是单独的 JSON 对象，这不是我们想要的。</p>
<p>To mitigate that, write an own serializer that uses the fact that it works only with the <code>Json</code> format:<br />
为了缓解这种情况，请编写一个自己的序列化程序，该序列化程序使用它仅适用于以下 <code>Json</code> 格式的事实：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kd">object</span><span class="w"> </span><span class="nc">UnknownProjectSerializer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">KSerializer</span><span class="o">&lt;</span><span class="n">UnknownProject</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">descriptor</span><span class="p">:</span><span class="w"> </span><span class="n">SerialDescriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buildClassSerialDescriptor</span><span class="p">(</span><span class="s">&quot;UnknownProject&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">        </span><span class="n">element</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">        </span><span class="n">element</span><span class="o">&lt;</span><span class="n">JsonElement</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;details&quot;</span><span class="p">)</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deserialize</span><span class="p">(</span><span class="n">decoder</span><span class="p">:</span><span class="w"> </span><span class="n">Decoder</span><span class="p">):</span><span class="w"> </span><span class="n">UnknownProject</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">        </span><span class="c1">// Cast to JSON-specific interface</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">jsonInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="w"> </span><span class="k">as?</span><span class="w"> </span><span class="n">JsonDecoder</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Can be deserialized only by JSON&quot;</span><span class="p">)</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">        </span><span class="c1">// Read the whole content as JSON</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonInput</span><span class="p">.</span><span class="na">decodeJsonElement</span><span class="p">().</span><span class="na">jsonObject</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">        </span><span class="c1">// Extract and remove name property</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">jsonPrimitive</span><span class="p">.</span><span class="na">content</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="na">toMutableMap</span><span class="p">()</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">        </span><span class="n">details</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">UnknownProject</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">(</span><span class="n">details</span><span class="p">))</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span><span class="n">encoder</span><span class="p">:</span><span class="w"> </span><span class="n">Encoder</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="n">UnknownProject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a><span class="w">        </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Serialization is not supported&quot;</span><span class="p">)</span>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a><span class="p">}</span>
</span></code></pre></div>
<p>Now it can be used to read flattened JSON details as <code>UnknownProject</code>:  </p>
<p>现在，它可以用来读取扁平化的JSON详细信息 <code>UnknownProject</code> ：</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">Json</span><span class="p">.</span><span class="na">decodeFromString</span><span class="p">(</span><span class="n">UnknownProjectSerializer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;&quot;{&quot;type&quot;:&quot;unknown&quot;,&quot;name&quot;:&quot;example&quot;,&quot;maintainer&quot;:&quot;Unknown&quot;,&quot;license&quot;:&quot;Apache 2.0&quot;}&quot;&quot;&quot;</span><span class="p">))</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="p">}</span>
</span></code></pre></div>
<blockquote>
<p>You can get the full code <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/guide/example/example-json-28.kt">here</a>.<br />
您可以在此处获取完整代码。</p>
</blockquote>
<div class="language-text highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>UnknownProject(name=example, details={&quot;type&quot;:&quot;unknown&quot;,&quot;maintainer&quot;:&quot;Unknown&quot;,&quot;license&quot;:&quot;Apache 2.0&quot;})
</span></code></pre></div>
<hr />
<p>The next chapter covers <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/formats.md">Alternative and custom formats (experimental)</a>.<br />
下一章将介绍替代格式和自定义格式（实验性）。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../%E5%A4%9A%E6%80%81%E6%80%A7-4/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 多态性">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                多态性
              </div>
            </div>
          </a>
        
        
          
          <a href="../%E6%9B%BF%E4%BB%A3%E6%A0%BC%E5%BC%8F%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%BC%E5%BC%8F%EF%BC%88%E5%AE%9E%E9%AA%8C%E6%80%A7%EF%BC%89-6/" class="md-footer__link md-footer__link--next" aria-label="下一页: 替代格式和自定义格式（实验性）">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                替代格式和自定义格式（实验性）
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018 - 2024 knightwood
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.prune", "navigation.footer", "navigation.instant", "search.highlight", "search.suggest", "search.share", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.3220b9d7.min.js"></script>
      
    
  </body>
</html>